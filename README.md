Based on [Go](http://golang.org/) changeset 21503:ad9e191a5194.

TODO: Proper copyright and license notice.
